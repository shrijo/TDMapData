<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESRI Synchronized Maps - Satellite & DEM</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        overflow: hidden;
    }
    
    .container {
        display: flex;
        height: 100vh;
        width: 100vw;
    }
    
    .map-container {
        flex: 1;
        position: relative;
    }
    
    .map {
        width: 100%;
        height: 100%;
    }
    
    .divider {
        width: 2px;
        background: #333;
        cursor: col-resize;
    }
    
    /* Hide Leaflet attribution for cleaner look */
    .leaflet-control-attribution {
        display: none;
    }
    
    /* Remove all zoom controls for minimal UI */
    .leaflet-control-zoom {
        display: none;
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="map-container">
            <div id="satelliteMap" class="map"></div>
        </div>

```
    <div class="divider"></div>
    
    <div class="map-container">
        <div id="demMap" class="map"></div>
    </div>
</div>

<script>
    // Initialize both maps at Grand Canyon for good elevation visibility
    const initialCenter = [36.0884, -112.0985];
    const initialZoom = 11;

    const satelliteMap = L.map('satelliteMap', {
        center: initialCenter,
        zoom: initialZoom,
        zoomControl: false,
        attributionControl: false
    });

    const demMap = L.map('demMap', {
        center: initialCenter,
        zoom: initialZoom,
        zoomControl: false,
        attributionControl: false
    });

    // ESRI World Imagery - Satellite basemap
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        maxZoom: 19,
        maxNativeZoom: 19
    }).addTo(satelliteMap);

    // ESRI WorldElevation/TopoBathy Image Service - True heightmap with elevation encoded in pixel values
    // This is the actual DEM heightmap where colors represent real elevation values
    L.tileLayer('https://elevation.arcgis.com/arcgis/rest/services/WorldElevation/TopoBathy/ImageServer/tile/{z}/{y}/{x}', {
        maxZoom: 15,
        maxNativeZoom: 15
    }).addTo(demMap);

    // Alternative: ESRI Terrain3D ImageServer - Another true elevation service
    // Uncomment if the above doesn't work or to try this alternative
    /*
    L.tileLayer('https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer/tile/{z}/{y}/{x}', {
        maxZoom: 15,
        maxNativeZoom: 15
    }).addTo(demMap);
    */

    // Sync state
    let programmaticMove = false;

    // Sync function
    function syncMaps(sourceMap, targetMap) {
        if (programmaticMove) return;
        
        programmaticMove = true;
        targetMap.setView(sourceMap.getCenter(), sourceMap.getZoom(), {
            animate: false
        });
        programmaticMove = false;
    }

    // Add event listeners for synchronization
    satelliteMap.on('move', () => syncMaps(satelliteMap, demMap));
    satelliteMap.on('zoom', () => syncMaps(satelliteMap, demMap));
    demMap.on('move', () => syncMaps(demMap, satelliteMap));
    demMap.on('zoom', () => syncMaps(demMap, satelliteMap));

    // Make divider draggable for resizing
    const divider = document.querySelector('.divider');
    const container = document.querySelector('.container');
    const leftPanel = container.children[0];
    const rightPanel = container.children[2];
    
    let isResizing = false;
    
    divider.addEventListener('mousedown', (e) => {
        isResizing = true;
        document.body.style.cursor = 'col-resize';
        e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
        if (!isResizing) return;
        
        const containerRect = container.getBoundingClientRect();
        const percentage = ((e.clientX - containerRect.left) / containerRect.width) * 100;
        
        if (percentage > 10 && percentage < 90) {
            leftPanel.style.flex = `0 0 ${percentage}%`;
            rightPanel.style.flex = `0 0 ${100 - percentage}%`;
            
            // Invalidate map sizes after resize
            setTimeout(() => {
                satelliteMap.invalidateSize();
                demMap.invalidateSize();
            }, 10);
        }
    });
    
    document.addEventListener('mouseup', () => {
        isResizing = false;
        document.body.style.cursor = 'default';
    });

    // Handle window resize
    window.addEventListener('resize', () => {
        satelliteMap.invalidateSize();
        demMap.invalidateSize();
    });

    // Enable scroll wheel zoom
    satelliteMap.scrollWheelZoom.enable();
    demMap.scrollWheelZoom.enable();
</script>
```

</body>
</html>